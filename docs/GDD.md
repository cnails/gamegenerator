# Game Design Document (GDD)
## 2D Roguelike: Knight's Descent

**Версия:** 1.0  
**Дата:** 2024  
**Жанр:** 2D Roguelike Action

---

## 1. Обзор игры

### 1.1 Концепция
2D roguelike с процедурно генерируемыми подземельями, состоящими из комнат и коридоров. Игрок управляет рыцарем, который должен пройти через 3 этажа и победить финального босса. Одна жизнь, забег длится 15–25 минут.

### 1.2 Основные механики
- **Процедурная генерация:** Каждый забег — новое подземелье
- **Перманентная смерть:** Одна жизнь, при смерти — начало нового забега
- **Прогрессия забега:** XP, левел-ап, выбор перков
- **Система оружия:** 3 типа оружия с уникальными характеристиками
- **Лут:** Золото, зелья, модификаторы оружия
- **Босс-фит:** Финальный бой с многофазовым боссом

---

## 2. Игрок (Герой)

### 2.1 Рыцарь
**Описание:** Бронированный воин с мечом по умолчанию.

### 2.2 Базовые характеристики

| Атрибут | Значение | Описание |
|---------|----------|----------|
| **HP (максимум)** | 100 | Здоровье героя |
| **Скорость движения** | 140 пикс/с | Базовая скорость перемещения |
| **Защита** | 0 | Базовая защита (уменьшает входящий урон) |
| **Уклонение** | 0% | Шанс избежать атаки |

### 2.3 Стартовое снаряжение
- **Оружие:** Меч (базовый)
- **Броня:** Базовая (без модификаторов)

---

## 3. Враги

### 3.1 Гоблин
**Описание:** Агрессивный враг среднего размера, способен уклоняться от атак.

| Атрибут | Значение |
|---------|----------|
| **HP** | 35 |
| **Урон** | 8 |
| **Скорость** | 120 пикс/с |
| **Уклонение** | 10% |
| **Тип атаки** | Ближний бой |
| **Поведение** | Агрессивное преследование игрока |

**Особенности:**
- Высокая мобильность
- Шанс уклониться от атаки игрока
- Спавнится группами по 2-4

### 3.2 Слизень
**Описание:** Медленный, но живучий враг. При смерти может разделиться.

| Атрибут | Значение |
|---------|----------|
| **HP** | 50 |
| **Урон** | 6 |
| **Скорость** | 80 пикс/с |
| **Уклонение** | 0% |
| **Тип атаки** | Ближний бой (замедление) |
| **Поведение** | Медленное преследование |

**Особенности:**
- При смерти: 50% шанс породить 2 маленьких слизня (HP: 15)
- Атака накладывает замедление на игрока (-20% скорости на 2 сек)
- Спавнится поодиночке или парами

### 3.3 Маленький Слизень
**Описание:** Потомок обычного слизня, слабее но быстрее.

| Атрибут | Значение |
|---------|----------|
| **HP** | 15 |
| **Урон** | 3 |
| **Скорость** | 100 пикс/с |
| **Уклонение** | 0% |

---

## 4. Финальный босс: Вождь Гоблинов

### 4.1 Общая информация
**Описание:** Мощный лидер гоблинов, финальный вызов игры.

| Фаза | HP | Описание |
|------|----|----------|
| **Фаза 1** | 600 | Базовая форма, использует Dash и Summon |
| **Фаза 2** | 400 | Разъярённая форма, добавляет Ground Slam |

**Общие характеристики:**
- **Скорость:** 100 пикс/с
- **Урон:** 15 (ближний бой)
- **Защита:** 5

### 4.2 Способности

#### Dash (Рывок)
- **Кулдаун:** 4 секунды
- **Дальность:** 300 пикселей
- **Урон:** 20
- **Описание:** Быстрый рывок в направлении игрока с уроном при контакте
- **Телеграф:** Красная линия направления за 0.5 сек до рывка

#### Summon (Призыв)
- **Кулдаун:** 10 секунд
- **Призывает:** 2-3 врага (случайно: гоблины или слизни)
- **Описание:** Призывает помощников на арену
- **Телеграф:** Зелёный круг на месте призыва за 1 сек

#### Ground Slam (Удар по земле)
- **Кулдаун:** 8 секунд (только фаза 2)
- **Урон:** 30
- **Радиус:** Конус 120 градусов, дальность 200 пикселей
- **Описание:** Мощный удар по земле в направлении игрока
- **Телеграф:** Красный конус на земле за 1.5 сек до удара

### 4.3 Тактика босса
- **Фаза 1:** Чередует Dash и Summon, держит дистанцию
- **Фаза 2:** Агрессивнее, использует все способности, чаще атакует в ближнем бою

---

## 5. Оружие

### 5.1 Меч
**Описание:** Базовое оружие ближнего боя, сбалансированное по характеристикам.

| Атрибут | Значение |
|---------|----------|
| **Урон** | 15 |
| **Радиус атаки** | 60 пикселей |
| **Скорость атаки** | Средняя (DPS ~22.5) |
| **Задержка атаки** | 0.67 сек |
| **Тип** | Ближний бой |
| **Особенности** | Нет |

### 5.2 Копьё
**Описание:** Длинное оружие с увеличенной дальностью и пробиванием.

| Атрибут | Значение |
|---------|----------|
| **Урон** | 20 |
| **Радиус атаки** | 90 пикселей |
| **Скорость атаки** | Медленная (DPS ~15.4) |
| **Задержка атаки** | +30% (0.87 сек) |
| **Тип** | Ближний бой |
| **Особенности** | Пробивание 1 врага (урон проходит через первого) |

### 5.3 Арбалет
**Описание:** Дистанционное оружие с высоким уроном, но низкой скорострельностью.

| Атрибут | Значение |
|---------|----------|
| **Урон** | 25 (за болт) |
| **Дальность** | 800 пикселей |
| **Скорость снаряда** | 400 пикс/с |
| **Скорострельность** | Низкая (DPS ~12.5) |
| **Задержка атаки** | 2.0 сек (перезарядка) |
| **Тип** | Дальний бой |
| **Особенности** | Требует перезарядки, снаряды летят по прямой |

---

## 6. Система прокачки (Skill Tree)

### 6.1 Общая механика
- **Левел-ап:** За XP от убийства врагов
- **Выбор перка:** При левел-апе предлагается выбор из 3 случайных перков
- **Реролл:** Редкий перк, позволяющий перевыбрать предложенные варианты

### 6.2 Ветки навыков

#### 6.2.1 Ветка "Оружие"
Фокус на улучшении боевых характеристик и эффективности оружия.

**Примеры перков:**
- **Острое лезвие:** +20% урона от меча
- **Длинное копьё:** +15% радиуса атаки копья
- **Тяжёлый болт:** +30% урона от арбалета
- **Быстрая атака:** -15% задержки атаки для всех видов оружия
- **Критический удар:** +10% шанс критического удара (x2 урон)
- **Двойной удар:** 15% шанс атаковать дважды

#### 6.2.2 Ветка "Выживание"
Фокус на защите, здоровье и выживаемости.

**Примеры перков:**
- **Живучесть:** +20 HP
- **Броня:** +5 защиты
- **Регенерация:** +2 HP/сек
- **Уклонение:** +10% шанс уклонения
- **Жизнестойкость:** При падении HP ниже 25%, +50% защиты
- **Второе дыхание:** При смерти восстанавливает 30 HP (1 раз за забег)

#### 6.2.3 Ветка "Магия/Рыцарское искусство"
Фокус на активных способностях и бафах.

**Примеры перков:**
- **Рывок:** Активная способность — быстрый рывок на 200 пикселей (кулдаун 8 сек)
- **Боевой клич:** Активная способность — оглушает врагов в радиусе 150 пикселей на 2 сек (кулдаун 15 сек)
- **Благословение:** +15% скорости движения на 10 сек после убийства врага
- **Щит веры:** +10 защиты на 5 сек после получения урона (кулдаун 20 сек)
- **Гнев:** +25% урона на 8 сек после убийства врага
- **Аура силы:** +10% урона всем союзникам в радиусе 200 пикселей (постоянно)

---

## 7. Лут и предметы

### 7.1 Типы лута

#### 7.1.1 Золото
- **Использование:** Покупка предметов у торговца (если реализован)
- **Выпадение:** С каждого убитого врага (5-15 золота)
- **Особые источники:** Сундуки, секретные комнаты

#### 7.1.2 Зелья
- **Зелье лечения:** Восстанавливает 50 HP
- **Зелье маны:** Восстанавливает энергию для способностей (если реализовано)
- **Зелье скорости:** +50% скорости на 10 сек
- **Зелье силы:** +50% урона на 15 сек

#### 7.1.3 Модификаторы оружия
Улучшают характеристики оружия. Применяются к текущему оружию.

**Редкость:**
- **Common (Обычный):** +5% урона, +5% скорости атаки
- **Rare (Редкий):** +15% урона, +10% скорости атаки, +1 особое свойство
- **Epic (Эпический):** +30% урона, +20% скорости атаки, +2 особых свойства

**Особые свойства (примеры):**
- Огненный урон (+5 урона огнём)
- Ледяной урон (замедляет врагов на 30%)
- Ядовитый урон (+3 урона в секунду на 5 сек)
- Похищение жизни (10% урона возвращается как HP)
- Цепная молния (урон переходит на ближайшего врага, -50% урона)

---

## 8. Прогресс забега

### 8.1 Структура подземелья

```
┌─────────────────────────────────────────┐
│           ЭТАЖ 1 (Начальный)            │
│  ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐    │
│  │ R1  │──│ R2  │──│ R3  │──│ R4  │    │
│  └──┬──┘  └──┬──┘  └──┬──┘  └──┬──┘    │
│     │        │        │        │       │
│  ┌──┴──┐  ┌──┴──┐  ┌──┴──┐  ┌──┴──┐    │
│  │ R5  │──│ R6  │──│ R7  │──│ R8  │    │
│  └─────┘  └─────┘  └─────┘  └──┬──┘    │
│                                │       │
│                            [Лестница]  │
└────────────────────────────────────────┘
                ↓
┌─────────────────────────────────────────┐
│           ЭТАЖ 2 (Средний)              │
│  ┌─────┐  ┌─────┐  ┌─────┐              │
│  │ R1  │──│ R2  │──│ R3  │              │
│  └──┬──┘  └──┬──┘  └──┬──┘              │
│     │        │        │                 │
│  ┌──┴──┐  ┌──┴──┐  ┌──┴──┐              │
│  │ R4  │──│ R5  │──│ R6  │              │
│  └─────┘  └─────┘  └──┬──┘              │
│                      │                  │
│                  [Лестница]             │
└────────────────────────────────────────┘
                ↓
┌─────────────────────────────────────────┐
│           ЭТАЖ 3 (Глубокий)             │
│  ┌─────┐  ┌─────┐  ┌─────┐              │
│  │ R1  │──│ R2  │──│ R3  │              │
│  └──┬──┘  └──┬──┘  └──┬──┘              │
│     │        │        │                 │
│  ┌──┴──┐  ┌──┴──┐  ┌──┴──┐              │
│  │ R4  │──│ R5  │──│ R6  │              │
│  └─────┘  └─────┘  └──┬──┘              │
│                      │                  │
│                  [Лестница]             │
└────────────────────────────────────────┘
                ↓
┌─────────────────────────────────────────┐
│         БОССОВАЯ АРЕНА                  │
│                                         │
│              [БОСС]                     │
│                                         │
│         (Финальная битва)               │
└─────────────────────────────────────────┘
```

### 8.2 Этапы прохождения

| Этаж | Комнат | Врагов на комнату | Сложность | XP за врага |
|------|--------|-------------------|-----------|-------------|
| **Этаж 1** | 6-8 | 3-5 | Низкая | 10-15 |
| **Этаж 2** | 5-7 | 4-6 | Средняя | 15-20 |
| **Этаж 3** | 4-6 | 5-7 | Высокая | 20-25 |
| **Босс** | 1 | 1 (босс) | Очень высокая | 500 |

### 8.3 Лестницы и переходы
- **Между этажами:** Лестница вниз в последней комнате этажа
- **Боссовая арена:** Отдельная большая комната после этажа 3
- **Секретные комнаты:** Редкие скрытые комнаты с ценным лутом (опционально)

---

## 9. Диаграмма сцен (State Machine)

```
                    ┌─────────────┐
                    │  Main Menu  │
                    └──────┬──────┘
                           │ [Start Game]
                           ↓
                    ┌─────────────┐
                    │  Gameplay   │◄──┐
                    │   Scene     │   │
                    └──────┬──────┘   │
                           │          │
        ┌──────────────────┼──────────┘
        │                  │
        │ [ESC]            │ [Player Died]
        ↓                  ↓
┌───────────────┐   ┌──────────────┐
│  Pause Scene  │   │ Game Over    │
└───────┬───────┘   │    Scene     │
        │           └──────┬───────┘
        │ [ESC]            │
        │                  │ [Enter]
        └──────────────────┼──────────┐
                           │          │
                           ↓          │
                    ┌─────────────┐  │
                    │  Main Menu  │──┘
                    └─────────────┘
                           │
                           │ [Victory]
                           ↓
                    ┌─────────────┐
                    │ Victory     │
                    │   Scene     │
                    └──────┬──────┘
                           │ [Enter]
                           ↓
                    ┌─────────────┐
                    │  Main Menu  │
                    └─────────────┘
```

**Описание переходов:**
- **Main Menu → Gameplay:** Нажатие "Start Game"
- **Gameplay → Pause:** Нажатие ESC
- **Pause → Gameplay:** Нажатие ESC (возврат)
- **Gameplay → Game Over:** Смерть игрока
- **Gameplay → Victory:** Победа над боссом
- **Game Over/Victory → Main Menu:** Нажатие Enter

---

## 10. Баланс и прогрессия

### 10.1 Таблица баланса врагов

| Враг | HP | Урон | Скорость | XP | Сложность |
|------|----|----|----------|----|-----------|
| Гоблин | 35 | 8 | 120 | 12 | Средняя |
| Слизень | 50 | 6 | 80 | 15 | Низкая |
| Маленький Слизень | 15 | 3 | 100 | 5 | Очень низкая |
| Босс (Фаза 1) | 600 | 15 | 100 | 300 | Очень высокая |
| Босс (Фаза 2) | 400 | 15 | 100 | 200 | Экстремальная |

### 10.2 Прогрессия игрока

| Уровень | XP до следующего | Ожидаемый этаж |
|---------|------------------|----------------|
| 1 | 0 | Этаж 1 |
| 2 | 50 | Этаж 1 |
| 3 | 100 | Этаж 1-2 |
| 4 | 150 | Этаж 2 |
| 5 | 200 | Этаж 2 |
| 6 | 250 | Этаж 2-3 |
| 7 | 300 | Этаж 3 |
| 8 | 350 | Этаж 3 |
| 9+ | 400+ | Босс |

**Примечание:** Игрок должен достичь уровня 5-7 к моменту босса для комфортного прохождения.

---

## 11. Backlog задач по спринтам

### Спринт 1: Базовая механика (MVP)
**Цель:** Игрок может двигаться, атаковать и убивать врагов.

- [ ] Базовое движение игрока (WASD)
- [ ] Система атаки мечом (ближний бой)
- [ ] Базовый AI врагов (преследование)
- [ ] Система здоровья (HP, смерть)
- [ ] Простая генерация комнат (1 этаж)
- [ ] Базовый HUD (HP, уровень)

**Оценка:** 2 недели

---

### Спринт 2: Враги и боевая система
**Цель:** Реализовать всех врагов и улучшить боевую механику.

- [ ] Гоблины с уклонением
- [ ] Слизни с разделением при смерти
- [ ] Система замедления (от слизней)
- [ ] Улучшенный AI (патрулирование, агрессия)
- [ ] Система урона и защиты
- [ ] Анимации атак и получения урона

**Оценка:** 2 недели

---

### Спринт 3: Оружие и лут
**Цель:** Добавить все типы оружия и систему лута.

- [ ] Система смены оружия
- [ ] Реализация копья (пробивание)
- [ ] Реализация арбалета (снаряды)
- [ ] Система выпадения лута
- [ ] Зелья (лечение, бафы)
- [ ] Модификаторы оружия (common/rare/epic)
- [ ] Инвентарь и использование предметов

**Оценка:** 2-3 недели

---

### Спринт 4: Система прокачки
**Цель:** Реализовать skill tree и выбор перков.

- [ ] Система XP и левел-апа
- [ ] Экран выбора перков (3 варианта)
- [ ] Реализация перков ветки "Оружие" (5-6 перков)
- [ ] Реализация перков ветки "Выживание" (5-6 перков)
- [ ] Реализация перков ветки "Магия" (5-6 перков)
- [ ] Система активных способностей (рывок, крик)
- [ ] Реролл перков (редкий перк)

**Оценка:** 2-3 недели

---

### Спринт 5: Генерация подземелий и этажи
**Цель:** Полная система этажей и переходов.

- [ ] Генерация 3 этажей с разной сложностью
- [ ] Система лестниц между этажами
- [ ] Увеличение сложности по этажам
- [ ] Спавн врагов в зависимости от этажа
- [ ] Секретные комнаты (опционально)
- [ ] Сохранение прогресса между этажами

**Оценка:** 2 недели

---

### Спринт 6: Финальный босс
**Цель:** Реализовать босса с фазами и способностями.

- [ ] Модель и анимации босса
- [ ] Фаза 1 (HP 600, Dash + Summon)
- [ ] Фаза 2 (HP 400, + Ground Slam)
- [ ] Система телеграфов способностей
- [ ] AI босса (переключение фаз, использование способностей)
- [ ] Призыв помощников (Summon)
- [ ] Боссовая арена (отдельная комната)
- [ ] Эффекты и визуальные эффекты способностей

**Оценка:** 2-3 недели

---

### Спринт 7: Полировка и баланс
**Цель:** Улучшение игрового опыта и балансировка.

- [ ] Балансировка урона и здоровья
- [ ] Балансировка скорости и мобильности
- [ ] Тестирование всех комбинаций перков
- [ ] Оптимизация производительности
- [ ] Улучшение визуальной обратной связи
- [ ] Звуковые эффекты и музыка
- [ ] Частицы и эффекты

**Оценка:** 2 недели

---

### Спринт 8: UI/UX и финальная полировка
**Цель:** Улучшение интерфейса и финальные доработки.

- [ ] Улучшение HUD (индикаторы способностей, кулдауны)
- [ ] Экран выбора перков (улучшенный дизайн)
- [ ] Экран смерти (статистика забега)
- [ ] Экран победы (статистика)
- [ ] Настройки (громкость, разрешение)
- [ ] Сохранение настроек
- [ ] Исправление багов
- [ ] Финальное тестирование

**Оценка:** 2 недели

---

## 12. Технические требования

### 12.1 Минимальные требования
- **Python:** 3.11+
- **Библиотеки:** pygame-ce >= 2.5.0
- **ОС:** Windows 10+, macOS 10.14+, Linux (Ubuntu 20.04+)

### 12.2 Рекомендуемые требования
- **Python:** 3.12+
- **ОЗУ:** 4 GB
- **Видеокарта:** Интегрированная (для 2D достаточно)

---

## 13. Метрики успеха

### 13.1 Игровые метрики
- **Время забега:** 15-25 минут (целевое)
- **Сложность:** Прохождение босса должно требовать 3-5 попыток у среднего игрока
- **Повторяемость:** Каждый забег должен ощущаться уникальным благодаря перкам

### 13.2 Технические метрики
- **FPS:** Стабильные 60 FPS
- **Загрузка:** Мгновенная генерация уровня (< 1 сек)
- **Память:** Использование < 500 MB

---

## 14. Будущие расширения (Post-MVP)

- [ ] Дополнительные типы врагов
- [ ] Больше типов оружия
- [ ] Система достижений
- [ ] Leaderboard (таблица рекордов)
- [ ] Дополнительные этажи (DLC)
- [ ] Кооперативный режим (2 игрока)
- [ ] Система торговца между этажами
- [ ] Ежедневные испытания

---

**Конец документа**

